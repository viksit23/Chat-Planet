<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>My profile</title>
</head>
<body ng-app="myApp" ng-controller="myProfileController">
	<div></div>
		<button type="button" class="btn btn-default btn-sm"
				data-toggle="modal" data-target="#myModal">Update Info</button>
				<br/>
	
	
	

				<!-- <img ng-src="{{userdetails.Image}}" width="250" height="250"
					id="profilepic" onerror="this.src='resources/images/login.png'">
				 -->	
					
					
			<!-- 	for profile pic  -->
				<input type="file" id="myfile" style="visibility: hidden;" 	onchange="angular.element(this).scope().setFile(this)"/>
				
				
				
	<img ng-src="/com.samplebackend/resources/images/user_{{userId}}.jpg" width="250" height="250"><br/>
						<button type="button" class="btn btn-link"
					ng-click="openFileChooser();">Change Picture</button>
					
					<input type="file" id="trigger" ng-show="false"
				
					accept="image/*" file-model="myFile" />
				
						
	
	<div class="modal fade" id="myModal" role="dialog">
			<div class="modal-dialog modal-sm">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Update Details</h4>
						
						<div class="modal-body">
						<form name="form" action="#">


							<div class="form-group"
								ng-class="{ 'has-error': form.username.$dirty && form.username.$error.required }">

								<div class="input-group" style="margin-top: 20px">
									<span class="input-group-addon"><i class="fa fa-user "
										aria-hidden="true"></i></span> <input type="text"
										class="form-control" name="username" id="username"
										ng-model="user.username" ng-value=user.username
										required />
										
								</div>
								<span ng-show="form.username.$dirty && form.username.$error.required"
									class="help-block">Username is required</span>
								</div></form></div>
						
						<div class="input-group" style="margin-top: 20px">
								<span class="input-group-addon"><i class="fa fa-phone "
									aria-hidden="true"></i></span> <input type="tel" class="form-control"
									ng-value=user.phone ng-model="user.phone" />
							</div>
						
						<div class="input-group" style="margin-top: 20px">
								<span class="input-group-addon"><i
									class="fa fa-map-marker fa-lg" aria-hidden="true"></i></span> <input
									type="text" class="form-control" ng-value=user.address
									ng-model="user.address" />
							</div>
						<div class="modal-footer" style="margin-top: 20px">
								<input type="submit" ng-click="updateUser()" value="Save"
									class="btn btn-primary" data-dismiss="modal"
									ng-disabled="form.username.$dirty && form.username.$error.required">
							</div>
						
					</div>
					</div>
					</div>
					</div>
	
	<div ng-repeat="user in userdetails">
		<span style="font-size: x-large">{{user.username}}</span><br>
		{{user.email}}<br />
	</div> 
		
		<h1>Username: {{user.username}}</h1>
		<h1>Email: {{user.email}}</h1>
		<h1>Phone: {{user.phone}}</h1>
		<h1>Address: {{user.address}}</h1>
		
<div class="col-md-3" ng-show="!secondUser">
			<button type="button" class="btn btn-default btn-sm"
				data-toggle="modal" data-target="#myModal2">Change Password</button>
				
				<!-- Modal for update password -->
		<div class="modal fade" id="myModal2" role="dialog">
			<div class="modal-dialog modal-sm">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Update Details</h4>
					</div>
					<div class="modal-body">
						<form name="form2" action="#">


							<div class="form-group"
								ng-class="{ 'has-error': form2.current_password.$dirty && form2.current_password.$error.required }">

								<div class="input-group" style="margin-top: 20px">
									<span class="input-group-addon"><i
										class="fa fa-unlock-alt" aria-hidden="true"></i></span> <input
										type="password" class="form-control" name="current_password"
										id="current_password" placeholder="Enter current password"
										ng-model="userdetails.currentpassword" required />
								</div>
								<span
									ng-show="form2.current_password.$dirty && form2.current_password.$error.required"
									class="help-block">Current Password is required</span>
							</div>

							<div
								ng-if="(userdetails.password != userdetails.currentpassword && form2.current_password.$dirty)">
								<span class="text-danger">Password is Incorrect</span>
							</div>


							<div class="form-group"
								ng-class="{ 'has-error': form2.new_password.$dirty && form2.new_password.$error.required }">

								<div class="input-group" style="margin-top: 20px">
									<span class="input-group-addon"><i class="fa fa-lock"
										aria-hidden="true"></i></span> <input type="password"
										class="form-control" name="new_password" id="new_password"
										placeholder="Enter new password"
										ng-model="userdetails.newpassword" required />
								</div>
								<span
									ng-show="form2.new_password.$dirty && form2.new_password.$error.required"
									class="help-block">New Password is required</span>
							</div>
							<div class="form-group"
								ng-class="{ 'has-error': form2.cnfrm_new_password.$dirty && form2.cnfrm_new_password.$error.required }">

								<div class="input-group" style="margin-top: 20px">
									<span class="input-group-addon"><i class="fa fa-lock"
										aria-hidden="true"></i></span> <input type="password"
										class="form-control" name="cnfrm_new_password"
										id="cnfrm_new_password" placeholder="Re-enter new password"
										ng-model="userdetails.cnfrmnewpassword" required />
								</div>
								<span
									ng-show="form2.cnfrm_new_password.$dirty && form2.cnfrm_new_password.$error.required"
									class="help-block">New Password is required</span>
							</div>


							<div
								ng-if="(userdetails.newpassword != userdetails.cnfrmnewpassword && form2.new_password.$dirty && form2.cnfrm_new_password.$dirty)">
								<span class="text-danger">Password Not Match</span>
							</div>


							<div class="modal-footer" style="margin-top: 20px">
								<input type="submit" ng-click="updatePassword()" value="Save"
									class="btn btn-primary" data-dismiss="modal"
									ng-disabled="form2.current_password.$error.required || form2.new_password.$error.required || form2.cnfrm_new_password.$error.required || userdetails.password != userdetails.currentpassword || userdetails.newpassword != userdetails.cnfrmnewpassword">
							</div>


						</form>
					</div>
				</div>
			</div>
		</div>
							
</body>
</html>